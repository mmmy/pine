# MT5 Trading HTTP Server Configuration Template
# 复制此文件为 config.yaml 并修改相应配置

# Trading Settings
trading:
  # Default trading parameters
  default_volume: 0.1      # Default lot size
  max_volume: 10.0         # Maximum allowed lot size
  min_volume: 0.01         # Minimum allowed lot size
  
  # Risk management
  max_slippage: 3          # Maximum slippage in points
  magic_number: 12345      # Magic number for trades
  
  # Allowed symbols (empty = allow all)
  allowed_symbols: []
  
# 自定义时间段配置 (通过 "开启时间区间" 控制)
# 默认关闭，只能通过webhook命令开启/关闭
custom_intervals:
  interval1:
    name: "自定义时段1"
    start_time: "08:00"
    end_time: "16:00"
    timezone: "Europe/London"
    description: "欧洲交易时段"

  interval2:
    name: "自定义时段2"
    start_time: "14:00"
    end_time: "22:00"
    timezone: "America/New_York"
    description: "美洲交易时段"

  interval3:
    name: "自定义时段3"
    start_time: "01:00"
    end_time: "09:00"
    timezone: "GMT+8"
    description: "亚洲交易时段"

  interval4:
    name: "自定义时段4"
    start_time: "13:00"
    end_time: "15:00"
    timezone: "GMT+8"
    description: "亚洲交易时段"

# MT5 Connection Settings
mt5:
  # MT5 terminal path (optional, auto-detect if not specified)
  terminal_path: ""
  
  # MT5 connection settings (使用当前已登录的MT5客户端)
  # 不需要账户配置，直接使用MT5客户端当前登录的账户
  
  # Connection timeout settings
  timeout:
    connect: 30  # Connection timeout in seconds
    trade: 10    # Trade operation timeout in seconds

# HTTP Server Settings
server:
  host: "127.0.0.1"  # Server host
  port: 5000         # Server port
  debug: false       # Debug mode (set to true for development)
  
  # API Security
  security:
    api_key: ""      # API key for authentication (请设置强密码)
    allowed_ips: []  # List of allowed IP addresses (empty = allow all)
    # 示例:
    # allowed_ips:
    #   - "192.168.1.0/24"
    #   - "10.0.0.100"
    #   - "127.0.0.1"

# Logging Settings
logging:
  level: "INFO"              # Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
  file: "mt5_server.log"     # Log file name
  max_size: 10485760         # Max file size in bytes (10MB)
  backup_count: 5            # Number of backup files to keep
  console: true              # Whether to log to console
  
  # Log format
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  date_format: "%Y-%m-%d %H:%M:%S"
  
  # Trading log configuration
  trading_log:
    enabled: true
    file: "trading.log"
    level: "INFO"

# Trading Hours Configuration
trading_hours:
  enabled: false             # Enable trading hours restriction
  timezone: "GMT+8"          # Timezone for trading hours
  
  # Trading sessions
  sessions:
    - start: "09:00"
      end: "17:00"
      days: [1, 2, 3, 4, 5]  # Monday to Friday (1=Monday, 7=Sunday)
    
    # 可以添加多个交易时段
    # - start: "20:00"
    #   end: "23:59"
    #   days: [1, 2, 3, 4, 5]

# Performance Settings (可选)
performance:
  # Connection pool settings
  connection_pool:
    max_connections: 10
    timeout: 30
  
  # Cache settings
  cache:
    enabled: true
    ttl: 300  # Cache TTL in seconds

# Error Handling (可选)
error_handling:
  # Retry settings
  retry:
    enabled: true
    max_attempts: 3
    delay: 1  # Retry delay in seconds
