# Pine Scriptç­–ç•¥ç”Ÿæˆå™¨ - ç”¨æˆ·æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

è¿™ä¸ªPowerShellè„šæœ¬å¯ä»¥è‡ªåŠ¨å°†CSVäº¤æ˜“æ•°æ®è½¬æ¢ä¸ºTradingViewçš„Pine Scriptç­–ç•¥æ–‡ä»¶ã€‚å®ƒä»CSVæ–‡ä»¶ä¸­è¯»å–æ‚¨çš„äº¤æ˜“è®¢å•ï¼Œæ›¿æ¢æ¨¡æ¿ä¸­çš„å ä½ç¬¦ï¼Œå¹¶ç”Ÿæˆå®Œæ•´çš„Pine Scriptç­–ç•¥ã€‚

## ğŸ“ æ–‡ä»¶ç»“æ„

```
schedule/
â”œâ”€â”€ generate_strategy.ps1              # ä¸»è¦ç”Ÿæˆè„šæœ¬
â”œâ”€â”€ copy_strategy_to_clipboard.ps1     # å¤åˆ¶ç”Ÿæˆæ–‡ä»¶åˆ°å‰ªè´´æ¿
â”œâ”€â”€ run_generator.bat                  # è¿è¡Œç”Ÿæˆå™¨çš„æ‰¹å¤„ç†æ–‡ä»¶
â”œâ”€â”€ è¿è¡Œç­–ç•¥ç”Ÿæˆå™¨.bat                  # ä¸­æ–‡ç‰ˆæ‰¹å¤„ç†æ–‡ä»¶
â”œâ”€â”€ trading_orders.csv                 # æ‚¨çš„äº¤æ˜“æ•°æ®ï¼ˆè¾“å…¥æ–‡ä»¶ï¼‰
â”œâ”€â”€ scheduled_trading_strategy.template # Pine Scriptæ¨¡æ¿
â”œâ”€â”€ generated_strategy.pine            # ç”Ÿæˆçš„ç­–ç•¥æ–‡ä»¶ï¼ˆè¾“å‡ºï¼‰
â”œâ”€â”€ README.md                          # æœ¬æŒ‡å—
â”œâ”€â”€ QUICK_START.md                     # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”œâ”€â”€ ä½¿ç”¨æ•™ç¨‹.md                        # ä¸­æ–‡è¯¦ç»†æ•™ç¨‹
â””â”€â”€ æ•…éšœæ’é™¤.md                        # æ•…éšœæ’é™¤æŒ‡å—
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•1ï¼šä½¿ç”¨æ‰¹å¤„ç†æ–‡ä»¶ï¼ˆæ¨èï¼‰
1. åŒå‡» `è¿è¡Œç­–ç•¥ç”Ÿæˆå™¨.bat` æˆ– `run_generator.bat`
2. è„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†æ‚¨çš„æ•°æ®
3. ç”Ÿæˆçš„æ–‡ä»¶ä¼šå¤åˆ¶åˆ°å‰ªè´´æ¿
4. ç›´æ¥ç²˜è´´åˆ°TradingViewä¸­

### æ–¹æ³•2ï¼šä½¿ç”¨PowerShell
1. åœ¨ `schedule` æ–‡ä»¶å¤¹ä¸­æ‰“å¼€PowerShell
2. è¿è¡Œï¼š`powershell.exe -ExecutionPolicy Bypass -File "generate_strategy.ps1"`
3. æŒ‰ç…§å±å¹•æç¤ºæ“ä½œ

### æ–¹æ³•3ï¼šä½¿ç”¨å‘½ä»¤æç¤ºç¬¦
```cmd
cd schedule
powershell.exe -ExecutionPolicy Bypass -File "generate_strategy.ps1"
```

## ğŸ“Š CSVæ•°æ®æ ¼å¼

æ‚¨çš„ `trading_orders.csv` æ–‡ä»¶åº”è¯¥éµå¾ªä»¥ä¸‹æ ¼å¼ï¼š

```csv
æ—¶é—´,æ–¹å‘,æ•°é‡
2025-07-08 09:30:00,1,100
2025-07-08 14:15:00,-1,150
2025-07-08 16:45:00,1,200
```

### åˆ—å®šä¹‰ï¼š
- **æ—¶é—´**ï¼šäº¤æ˜“æ—¶é—´ï¼Œæ ¼å¼ä¸º `YYYY-MM-DD HH:MM:SS`ï¼ˆæ— éœ€æ—¶åŒºä¿¡æ¯ï¼‰
- **æ–¹å‘**ï¼š`1` = ä¹°å…¥ï¼Œ`-1` = å–å‡º
- **æ•°é‡**ï¼šè¦äº¤æ˜“çš„è‚¡æ•°/å•ä½æ•°

### ç¤ºä¾‹æ•°æ®ï¼š
| æ—¶é—´ | æ–¹å‘ | æ•°é‡ | æ“ä½œè¯´æ˜ |
|------|------|------|----------|
| 2025-07-08 09:30:00 | 1 | 100 | ä¸Šåˆ9:30ä¹°å…¥100è‚¡ |
| 2025-07-08 14:15:00 | -1 | 150 | ä¸‹åˆ2:15å–å‡º150è‚¡ |
| 2025-07-08 16:45:00 | 1 | 200 | ä¸‹åˆ4:45ä¹°å…¥200è‚¡ |

## ğŸ”§ è„šæœ¬åŠŸèƒ½

### âœ… è‡ªåŠ¨æ¸…ç†
- åˆ›å»ºæ–°æ–‡ä»¶å‰åˆ é™¤æ—§çš„ç”Ÿæˆæ–‡ä»¶
- åˆ é™¤æœ¬åœ°å’Œæ ¹ç›®å½•çš„æ–‡ä»¶
- ç¡®ä¿æ¯æ¬¡éƒ½æ˜¯å¹²å‡€çš„ç”Ÿæˆ

### âœ… æ–‡ä»¶éªŒè¯
- æ£€æŸ¥CSVå’Œæ¨¡æ¿æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- å¦‚æœæ–‡ä»¶ç¼ºå¤±æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯
- éªŒè¯æ–‡ä»¶å¯è®¿é—®æ€§

### âœ… æ•°æ®å¤„ç†
- è¯»å–CSVæ•°æ®å¹¶è·³è¿‡æ ‡é¢˜è¡Œ
- æ—¶é—´æ ¼å¼å¤„ç†ï¼šå¤„ç†æ ‡å‡†æ—¶é—´æ ¼å¼ï¼ˆæ— éœ€æ—¶åŒºä¿¡æ¯ï¼‰
- ç”ŸæˆPine Scriptæ•°ç»„æ¨é€è¯­å¥
- æ›¿æ¢æ¨¡æ¿ä¸­çš„ `{{template}}` å ä½ç¬¦

### âœ… è¾“å‡ºç”Ÿæˆ
- åœ¨scheduleæ–‡ä»¶å¤¹ä¸­åˆ›å»º `generated_strategy.pine`
- å¤åˆ¶æ–‡ä»¶åˆ°æ ¹ç›®å½•ä½œä¸º `scheduled_trading_strategy_final.pine`
- è‡ªåŠ¨å¤åˆ¶å†…å®¹åˆ°å‰ªè´´æ¿
- æ˜¾ç¤ºè¯¦ç»†çš„è¿›åº¦å’Œæ‘˜è¦

## ğŸ“ é€æ­¥å¤„ç†è¿‡ç¨‹

è¿è¡Œè„šæœ¬æ—¶ï¼Œå®ƒä¼šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. **ç¬¬1æ­¥ï¼šæ¸…ç†** - åˆ é™¤æ—§çš„ç”Ÿæˆæ–‡ä»¶
2. **ç¬¬2æ­¥ï¼šéªŒè¯** - æ£€æŸ¥è¾“å…¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
3. **ç¬¬3æ­¥ï¼šæ•°æ®å¤„ç†** - è¯»å–å’Œå¤„ç†CSVæ•°æ®
4. **ç¬¬4æ­¥ï¼šä»£ç ç”Ÿæˆ** - åˆ›å»ºPine Scriptä»£ç 
5. **ç¬¬5æ­¥ï¼šå‰ªè´´æ¿å¤åˆ¶** - å°†ç»“æœå¤åˆ¶åˆ°å‰ªè´´æ¿
6. **ç¬¬6æ­¥ï¼šæ‘˜è¦** - æ˜¾ç¤ºå®ŒæˆçŠ¶æ€å’Œæ–‡ä»¶ä¿¡æ¯

## ğŸ¯ åœ¨TradingViewä¸­ä½¿ç”¨

1. è¿è¡Œç”Ÿæˆå™¨è„šæœ¬
2. æ‰“å¼€TradingView Pine Scriptç¼–è¾‘å™¨
3. ç²˜è´´ç”Ÿæˆçš„ä»£ç ï¼ˆCtrl+Vï¼‰
4. ç‚¹å‡»"æ·»åŠ åˆ°å›¾è¡¨"
5. æ ¹æ®éœ€è¦é…ç½®ç­–ç•¥å‚æ•°

## âš™ï¸ ç”Ÿæˆçš„Pine ScriptåŠŸèƒ½

ç”Ÿæˆçš„ç­–ç•¥åŒ…æ‹¬ï¼š

- **åŸºäºæ—¶é—´çš„äº¤æ˜“**ï¼šåœ¨æŒ‡å®šæ—¶é—´æ‰§è¡Œäº¤æ˜“
- **è°ƒè¯•æ¨¡å¼**ï¼šå¯é€‰çš„æ•…éšœæ’é™¤æ—¥å¿—
- **ç­–ç•¥æ§åˆ¶**ï¼šå¯ç”¨/ç¦ç”¨ç­–ç•¥æ‰§è¡Œ
- **ä»“ä½ç®¡ç†**ï¼šè‡ªåŠ¨å¤„ç†å¤šå¤´/ç©ºå¤´ä»“ä½
- **è§†è§‰æŒ‡æ ‡**ï¼šåœ¨å›¾è¡¨ä¸Šæ˜¾ç¤ºä¹°å…¥/å–å‡ºæ ‡ç­¾
- **çŠ¶æ€è¡¨æ ¼**ï¼šå®æ—¶æ˜¾ç¤ºç­–ç•¥ä¿¡æ¯

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜ï¼š

**é”™è¯¯ï¼šæ‰¾ä¸åˆ°CSVæ–‡ä»¶**
- ç¡®ä¿ `trading_orders.csv` å­˜åœ¨äºscheduleæ–‡ä»¶å¤¹ä¸­
- æ£€æŸ¥æ–‡ä»¶åæ‹¼å†™å’Œæ‰©å±•å

**é”™è¯¯ï¼šæ‰¾ä¸åˆ°æ¨¡æ¿æ–‡ä»¶**
- ç¡®ä¿ `scheduled_trading_strategy.template` å­˜åœ¨
- éªŒè¯æ–‡ä»¶æ²¡æœ‰æŸå

**PowerShellæ‰§è¡Œç­–ç•¥é”™è¯¯**
- è¿è¡Œï¼š`Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser`
- æˆ–ä½¿ç”¨æ‰¹å¤„ç†æ–‡ä»¶ï¼Œå®ƒä¼šç»•è¿‡æ­¤é—®é¢˜

**ä¸­æ–‡å­—ç¬¦æ˜¾ç¤ºé—®é¢˜**
- ç¡®ä¿æ‚¨çš„PowerShellæ”¯æŒUTF-8ç¼–ç 
- å°è¯•ä»å‘½ä»¤æç¤ºç¬¦è¿è¡Œ

### æ–‡ä»¶æƒé™ï¼š
- ç¡®ä¿æ‚¨åœ¨scheduleæ–‡ä»¶å¤¹ä¸­æœ‰å†™æƒé™
- å¦‚æœéœ€è¦ï¼Œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ

## ğŸ“‹ ç¤ºä¾‹è¾“å‡º

æˆåŠŸæ‰§è¡Œåï¼Œæ‚¨ä¼šçœ‹åˆ°ï¼š

```
============================================================
Pine Script Strategy Generator
============================================================
CSV file: trading_orders.csv
Template file: scheduled_trading_strategy.template
Output file: generated_strategy.pine

Step 1: Cleaning up old generated files...
âœ“ Deleted old file: generated_strategy.pine
âœ“ Deleted old root file: ..\scheduled_trading_strategy_final.pine

Step 2: Checking input files...
âœ“ CSV file found: trading_orders.csv
âœ“ Template file found: scheduled_trading_strategy.template

Step 3: Processing CSV data...
âœ“ Found 3 trading records

Step 4: Generating Pine Script code...
âœ“ Generated file: generated_strategy.pine
âœ“ Copied to root directory: ..\scheduled_trading_strategy_final.pine

Step 5: Copying to clipboard...
âœ“ Content copied to clipboard

Step 6: Summary
âœ“ Strategy file generated: generated_strategy.pine
âœ“ Root file updated: ..\scheduled_trading_strategy_final.pine
âœ“ Content copied to clipboard
âœ“ Processed 3 trading records
âœ“ File size: 4250 bytes

Generated Trading Plan Summary:
==================================================
ğŸ“ˆ 2025-07-08 09:30:00 - Buy 100 shares
ğŸ“‰ 2025-07-08 14:15:00 - Sell 150 shares
ğŸ“ˆ 2025-07-08 16:45:00 - Buy 200 shares
==================================================

Task completed! File generated and copied to clipboard!
You can now paste it directly into TradingView.
```

## ğŸ› ï¸ è‡ªå®šä¹‰è®¾ç½®

### ä¿®æ”¹æ—¶é—´æ ¼å¼ï¼š
ç¼–è¾‘è„šæœ¬ä¸­çš„æ—¶é—´å¤„ç†éƒ¨åˆ†ä»¥æ”¯æŒä¸åŒçš„æ—¶é—´æ ¼å¼éœ€æ±‚ã€‚

### æ·»åŠ æ›´å¤šæ•°æ®åˆ—ï¼š
ä¿®æ”¹CSVå¤„ç†éƒ¨åˆ†ä»¥å¤„ç†é¢å¤–çš„åˆ—ï¼Œå¦‚æ­¢æŸã€æ­¢ç›ˆç­‰ã€‚

### æ›´æ”¹è¾“å‡ºä½ç½®ï¼š
æ›´æ–°è„šæœ¬ä¸­çš„ `$OutputPath` å’Œ `$RootFinalFile` å˜é‡ã€‚

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹æœ¬READMEçš„å¸¸è§è§£å†³æ–¹æ¡ˆ
2. éªŒè¯æ‚¨çš„CSVæ•°æ®æ ¼å¼æ˜¯å¦åŒ¹é…ç¤ºä¾‹
3. ç¡®ä¿æ‰€æœ‰å¿…éœ€æ–‡ä»¶éƒ½å­˜åœ¨
4. å°è¯•å…ˆè¿è¡Œç®€å•çš„æµ‹è¯•è„šæœ¬
5. æŸ¥çœ‹ `æ•…éšœæ’é™¤.md` è·å–è¯¦ç»†å¸®åŠ©

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **`QUICK_START.md`** - å¿«é€Ÿå¼€å§‹æŒ‡å—
- **`ä½¿ç”¨æ•™ç¨‹.md`** - è¯¦ç»†ä½¿ç”¨æ•™ç¨‹
- **`æ•…éšœæ’é™¤.md`** - æ•…éšœæ’é™¤æŒ‡å—

## ğŸ”„ ç‰ˆæœ¬å†å²

- **v1.0**ï¼šåˆå§‹ç‰ˆæœ¬ï¼ŒåŸºæœ¬çš„CSVåˆ°Pine Scriptè½¬æ¢
- **v1.1**ï¼šæ·»åŠ è‡ªåŠ¨æ¸…ç†å’ŒåŒæ–‡ä»¶è¾“å‡º
- **v1.2**ï¼šæ”¹è¿›é”™è¯¯å¤„ç†å’Œè‹±è¯­è¯­è¨€æ”¯æŒ
- **v1.3**ï¼šæ·»åŠ å…¨é¢çš„æ—¥å¿—è®°å½•å’ŒçŠ¶æ€æŠ¥å‘Š
- **v1.4**ï¼šæ·»åŠ ä¸­æ–‡æ–‡æ¡£å’Œæ”¹è¿›çš„ç”¨æˆ·ç•Œé¢
